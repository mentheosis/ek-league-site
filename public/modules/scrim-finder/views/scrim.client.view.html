<section style="margin-right: 20px" data-ng-controller="ScrimController" ng-init="initialize()">

      <div class='scrim-headline-container'>
        <div class = "scrim-title">
          Scrim Finder
        </div>
        <div class = "scrim-headline">
          Post a scrim request on the board, or just chat with other players
          <br>

            <div class="scrim-container-new">
              <div ng-hide="createVisible" ng-click="switchCreateVisible()" style="cursor:pointer; color: #FF9000">New Post</div>
              <form ng-show="createVisible" ng-submit="" novalidate>
                <fieldset>
                  <img class="scrim-img" ng-src="{{authentication.user.avatar}}">
                  <div class="scrim-bit">FORMAT:<input class="scrim-input" ng-model="format" placeholder="(8v8, 5v5...)" type="text"></div>
                  <div class="scrim-bit">   MAP:<input class="scrim-input" ng-model="map" placeholder="operation overlord" type="text"></div>
                  <div class="scrim-bit">  TIME:<input class="scrim-input" ng-model="notes" placeholder="9pm EST" type="text"></div>
                  <br>
                  <!--
                  <div class = "scrim-desc-container">
                    <textarea class="scrim-desc scrim-bit scrim-input" placeholder="Contact info, notes..." data-ng-model="notes"></textarea>
                  </div>
                  -->
                  <div style="display:flex">
                    <div style="display: inline-block; width: 75px">
                      <input ng-click="createScrim()" type="submit" style="width:75px; color:black" value="Post!">
                    </div>
                    <div style="display: inline-block; width: 75px; cursor:pointer; color:black">
                      <input ng-click="switchCreateVisible()" type="submit" value="Cancel" style="width:75px">
                    </div>
                  </div>

                  <span data-ng-show="error" class="text-danger">
                    <strong data-ng-bind="error"></strong>
                  </span>
                </fieldset>
              </form>
            </div>

        </div>
      </div>

      <div class="row">
        <div class="col-xs-6">

          <div data-ng-repeat="scrim in scrims" class="scrim-container">
            <img class="scrim-img" title="{{scrim.team}}" ng-src="{{scrim.imageurl}}">

            <div ng-show = "scrimFinalized(scrim)" class="scrim-finalized">
              <span style= "font-size: 2em">Challenge Accepted</span>
              <div class="scrim-replies" ng-show="authentication.user && canSeePrivateChat(scrim)">
                <span ng-hide="editingDetails">
                  <a href ng-click="editingDetails = true">edit </a>
                  {{scrim.acceptMessage}}
                </span>
                <span ng-show="editingDetails">
                  <a href ng-click="savePrivateMessage(scrim)">save </a>
                  <input class="scrim-input" ng-model="scrim.acceptMessage" placeholder="server and pw" type="text">
                </span>
              </div>
            </div>

            <div ng-show = "!scrimFinalized(scrim)">

              <div class="scrim-bit">FORMAT:<span class="scrim-info" ng-bind="scrim.format"></span></div>
              <div class="scrim-bit">   MAP:<span class="scrim-info" ng-bind="scrim.map"></span></div>
              <div class="scrim-bit">  TIME:<span class="scrim-info" ng-bind="scrim.notes"></span></div>
              <div class="scrim-replies" ng-show="authentication.user">
                <a ng-show="!isScrimCreator(scrim) && !replied(scrim)" href ng-click="replyToScrim(scrim._id)">Challenge</a>
                <span ng-show="replied(scrim)">Sent Challenge</span>
                <a ng-show="hasReplies(scrim)" href ng-click="showReplies = !showReplies">View Challengers</a>
                <div ng-show="showReplies" ng-repeat="user in scrim.replies">
                  <a href title="Accept" ng-click="acceptReply(scrim._id, user)">
                    <i class="glyphicon glyphicon-check"></i>
                  </a>
                  {{user}}
                </div>
              </div>

            </div>
            <!--
            <br>
            <div class = "scrim-desc-container">
              <span class="scrim-desc scrim-bit scrim-input" ng-bind="scrim.notes"></span>
            </div>
            -->

          </div>

        </div>
        <div class="col-xs-6">

          <div class = "chat-window">
            <!--
            <div class = "chat-users" ng-click= "showUsers = !showUsers">
            {{userList.length}} Users Online - Click to show/hide
            </div>
            -->
            <div class = "chat-userlist chat-message-container">
              <div class="users-online">
                {{userList.length}} Users Online
              </div>
              <div ng-repeat="user in userList">
                {{user}}
              </div>
            </div>
            <div scroll-glue class="chat-message-container">
              <div ng-repeat="msg in chatMessages track by $index">
                <span class="chat-user">{{msg.user}}:</span>
                <span class="chat-msg">{{msg.message}}</span>
              </div>
            </div>
            <div class="chat-bar-container">
              <form ng-show="authentication.user" ng-submit="sendChat(chatMsg)">
                <input class = "chat-bar" type="text" ng-model="chatMsg" placeholder="Chat!">
              </form>
              <div class="chat-bar" ng-hide="authentication.user">
                <span> signin or signup to chat</span>
              </div>
            </div>
          </div>

        </div>
      </div>

</section>
